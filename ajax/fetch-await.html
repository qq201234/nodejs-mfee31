<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>fetch</title>
  </head>
  <body>
    <button id="asyncBtn">非同步</button>
    <button id="countBtn">測試按鈕</button>
    <div id="count">0</div>
    <div id="response">message</div>

    <script>
      let date = new Date();

      var responseDom = document.getElementById('response');

      var asyncBtn = document.getElementById('asyncBtn');
      asyncBtn.addEventListener('click', async function () {
        try {
          responseDom.innerText = '開始 fetch「非」同步請求 (await)';
          // http://54.71.133.152:3000/
          let response = await fetch('http://54.71.133.152:3000/');
          let data = await response.text();
          responseDom.innerText = `來自 await fetch 的結果: ${data}`;
        } catch (e) {
          console.error(e);
        }
      });

      var count = document.getElementById('count');
      var countBtn = document.getElementById('countBtn');
      countBtn.addEventListener('click', function () {
        count.innerText = parseInt(count.innerText, 10) + 1;
      });
    </script>
  </body>
</html>
